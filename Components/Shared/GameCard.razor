@using Questlogd.Models

<div class="card-game" @onclick="OnCardClick">
    <img src="@Game.CoverImageUrl"
         alt="@Game.Name"
         class="card-game-cover"
         loading="lazy"
         onerror="this.src='https://via.placeholder.com/264x352?text=No+Cover'" />

    <div class="card-game-body">
        <h4 class="card-game-title" title="@Game.Name">@Game.Name</h4>

        <div class="d-flex justify-content-between align-items-center mt-2">
            @if (ShowStatus)
            {
                <StatusBadge Status="@Game.Status" />
            }
            else
            {
                <span class="card-game-meta">@Game.Genre</span>
            }

            @if (ShowRating && Game.Rating.HasValue)
            {
                <RatingDisplay Rating="@Game.Rating" />
            }
        </div>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public Game Game { get; set; } = default!;

    [Parameter]
    public bool ShowStatus { get; set; } = true;

    [Parameter]
    public bool ShowRating { get; set; } = true;

    [Parameter]
    public EventCallback<Game> OnClick { get; set; }

    private async Task OnCardClick()
    {
        if (OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(Game);
        }
    }
}
